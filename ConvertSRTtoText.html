<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Convert SRT to Text</title>
	<style>
		.container {
			display: flex;
			justify-content: space-between;
			align-items: center;
			gap: 10px;
			margin-top: 20px;
		}
		textarea {
			width: 45%;
			height: 300px;
			resize: none;
			font-size: 16px;
			border: 1px solid #ccc;
			padding: 10px;
			box-sizing: border-box;
		}
		textarea.left {
			order: 1;
		}
		textarea.right {
			order: 2;
		}
		 button {
            margin-top: 10px;
            font-size: 14px;
            padding: 5px 10px;
            background-color: #4CAF50;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
	</style>
</head>
<body>
	<h1>Convert SRT to Text</h1>
	<form>
		<div>
			<label for="input-file">Choose SRT file:</label>
			<input type="file" id="input-file" accept=".srt" required>
		</div>
		<div>
			<button type="button" onclick="preview()">Convert</button>
		</div>
		<div class="container">
			<textarea id="input-text" class="left" readonly></textarea>
			<textarea id="output-text" class="right" readonly></textarea>
		</div>
		<div>
			<button type="button" onclick="download()">Download</button>
		</div>
	</form>
	<script>
		function preview() {
			const inputFile = document.getElementById('input-file').files[0];
			const reader = new FileReader();
			reader.readAsText(inputFile);
			reader.onload = function() {
				document.getElementById('input-text').value = reader.result;
				const lines = reader.result.split(/\r?\n/);
				let output = '';
				for (const line of lines) {
					if (line.match(/^\d+$/) || line.match(/^\d{2}:\d{2}:\d{2},\d{3}\s-->\s\d{2}:\d{2}:\d{2},\d{3}$/) || line === '') {
						continue;
					}
					output += line + '\n';
				}
				document.getElementById('output-text').value = output;
			};
		}
		function download() {
			const outputText = document.getElementById('output-text').value;
			const blob = new Blob([outputText], {type: 'text/plain;charset=utf-8'});
			const url = URL.createObjectURL(blob);
			const a = document.createElement('a');
			a.href = url;
			a.download = document.getElementById('input-file').files[0].name.replace('.srt', '') + '.txt';
			document.body.appendChild(a);
			a.click();
			document.body.removeChild(a);
			URL.revokeObjectURL(url);
		}
	</script>
</body>
</html>
